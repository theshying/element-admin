(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd2594be"],{"5ec8":function(e,t,a){},"7fd7":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container h100p"},[a("search-table-pagination",{attrs:{columns:e.columns,fetch:e.$client.getUserList,"form-options":e.formOptions}})],1)},r=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[e.formOptions?a("search-form",{ref:"searchForm",staticClass:"search-form",attrs:{forms:e.formOptions.forms,size:e.formOptions.size,fuzzy:e.formOptions.fuzzy,inline:e.formOptions.inline,"label-width":e.formOptions.labelWidth,"item-width":e.formOptions.itemWidth,"submit-handler":e.searchHandler,"submit-loading":e.loading,"show-reset-btn":e.formOptions.showResetBtn,"submit-btn-text":e.formOptions.submitBtnText,"reset-btn-text":e.formOptions.resetBtnText,"reset-btn-callback":e.formOptions.resetBtnCallback}}):e._e(),e._v(" "),e._t("form",null,{loading:e.loading,search:e.searchHandler}),e._v(" "),e._t("default"),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.lock",value:e.loading,expression:"loading",modifiers:{lock:!0}}],ref:"table",staticClass:"table-content",style:e.tableStyle,attrs:{data:e.tableData,border:e.border,size:e.size,stripe:e.stripe,height:e.height,"max-height":e.maxHeight,fit:e.fit,"show-header":e.showHeader,"highlight-current-row":e.highlightCurrentRow,"current-row-key":e.currentRowKey,"row-class-name":e.rowClassName,"row-style":e.rowStyle,"row-ket":e.rowKey,"empty-text":e.emptyText,"default-expand-all":e.defaultExpandAll,"expand-row-keys":e.expandRowKeys,"default-sort":e.defaultSort,"tooltip-effect":e.tooltipEffect,"show-summary":e.showSummary,"sum-text":e.sumText,"summary-method":e.summaryMethod},on:{select:function(t,a){return e.emitEventHandler("select",t,a)},"select-all":function(t){return e.emitEventHandler("select-all",t)},"selection-change":function(t){return e.emitEventHandler("selection-change",t)},"cell-mouse-enter":function(t,a,n,r){return e.emitEventHandler("cell-mouse-enter",t,a,n,r)},"cell-mouse-leave":function(t,a,n,r){return e.emitEventHandler("cell-mouse-leave",t,a,n,r)},"cell-click":function(t,a,n,r){return e.emitEventHandler("cell-click",t,a,n,r)},"cell-dblclick":function(t,a,n,r){return e.emitEventHandler("cell-dblclick",t,a,n,r)},"row-click":function(t,a,n){return e.emitEventHandler("row-click",t,a,n)},"row-dblclick":function(t,a){return e.emitEventHandler("row-dblclick",t,a)},"row-contextmenu":function(t,a){return e.emitEventHandler("row-contextmenu",t,a)},"header-click":function(t,a){return e.emitEventHandler("header-click",t,a)},"sort-change":function(t){return e.emitEventHandler("sort-change",t)},"filter-change":function(t){return e.emitEventHandler("filter-change",t)},"current-change":function(t,a){return e.emitEventHandler("current-change",t,a)},"header-dragend":function(t,a,n,r){return e.emitEventHandler("header-dragend",t,a,n,r)},"expand-change":function(t,a){return e.emitEventHandler("expand-change",t,a)}}},[e._l(e.columns,(function(t,n){return[void 0===t.type?a("el-table-column",{key:n,attrs:{"column-key":t.columnKey,prop:t.prop,label:t.label,width:t.minWidth?"-":t.width||140,"min-width":t.minWidth||t.width||140,fixed:t.fixed,"render-header":t.renderHeader,sortable:t.sortable,"sort-by":t.sortBy,"sort-method":t.method,resizable:t.resizable,formatter:t.formatter,"show-overflow-tooltip":t.showOverflowTooltip,align:t.align||"center","header-align":t.headerAlign||t.align,"class-name":t.className,"label-class-name":t.labelClassName,selectable:t.selectable,"reserve-selection":t.reserveSelection,filters:t.filters,"filter-placement":t.filterPlacement,"filter-multiple":t.filterMultiple,"filter-method":t.filterMethod,"filtered-value":t.filteredValue},scopedSlots:e._u([{key:"default",fn:function(n){return[t.filter?a("span",[e._v("\n            "+e._s(e.Vue.filter(t["filter"])(n.row[t.prop]))+"\n          ")]):t.slotName?a("span",[e._t(t.slotName,null,{row:n.row,$index:n.$index})],2):t.render?a("span",[e._v("\n            "+e._s(t.render(n.row))+"\n          ")]):t.formatter?a("span",[e._v("\n            "+e._s(t.formatter(n.row,n.column,n.row[t.prop],n.$index))+"\n          ")]):a("span",[e._v("\n            "+e._s(n.row[t.prop])+"\n          ")])]}}],null,!0)}):a("el-table-column",e._b({key:n},"el-table-column",t,!1))]}))],2),e._v(" "),e.showPagination?a("div",{staticStyle:{"margin-top":"10px","text-align":"right"}},[a("el-pagination",{attrs:{"current-page":e.pagination.pageIndex,"page-sizes":e.pageSizes,"page-size":e.pagination.pageSize,layout:e.paginationLayout,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],2)},o=[],l=a("2b0e"),s={height:{type:Number|String,default:"100%"},maxHeight:[String,Number],size:{type:String,default:"mini"},stripe:{type:Boolean,default:!0},border:{type:Boolean,default:!0},fit:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},highlightCurrentRow:Boolean,currentRowKey:[String,Number],rowClassName:[String,Function],rowStyle:[String,Function],rowKey:[String,Function],emptyText:String,defaultExpandAll:Boolean,expandRowKeys:Array,defaultSort:Object,tooltipEffect:String,showSummary:Boolean,sumText:String,summaryMethod:Function,tableStyle:{type:String,default:"width:100%"},fetch:{type:Function},url:{type:String},method:{type:String,default:"get",validator:function(e){var t=["get","post","put","delete"];return-1!==t.indexOf(e.toLowerCase())}},headers:{type:Object,default:function(){return{}}},listField:{type:String,default:"data.list"},totalField:{type:String,default:"data.total"},params:{type:Object,default:function(){return{}}},formOptions:{type:Object},autoLoad:{type:Boolean,default:!0},type:{type:String,default:"remote",validator:function(e){var t=["remote","local"],a=-1!==t.indexOf(e);if(!a)throw new Error("Invalid type of '".concat(e,"', please set one type of 'remote' or 'local'."));return a}},data:{type:Array},dataHandler:{type:Function},columns:{type:Array,required:!0},showPagination:{type:Boolean,default:!0},pageSizes:{type:Array,default:function(){return[20,50,100]}},paginationLayout:{type:String,default:"total, prev, pager, next, jumper, sizes"},pageIndexKey:{type:String,default:"pageIndex"},pageSizeKey:{type:String,default:"pageSize"}},c=s,u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",attrs:{model:e.params,inline:e.inline,"label-width":e.labelWidth?e.labelWidth+"px":""},nativeOn:{submit:function(t){return t.preventDefault(),e.searchHandler()}}},[e._l(e.forms,(function(t,n){return a("el-form-item",{key:n,attrs:{prop:"daterange"!=t.itemType?t.prop:e.datePrefix+n,label:t.label,rules:t.rules||[],"label-width":t.labelWidth?t.labelWidth+"px":""}},["input"===t.itemType||void 0===t.itemType?a("el-input",{style:e.itemStyle+(t.itemWidth?"width: "+t.itemWidth+"px;":""),attrs:{size:t.size?t.size:e.size,readonly:t.readonly,disabled:t.disabled,placeholder:t.placeholder},model:{value:e.params[t.modelValue],callback:function(a){e.$set(e.params,t.modelValue,a)},expression:"params[form.modelValue]"}}):"select"===t.itemType?a("el-select",{style:e.itemStyle+(t.itemWidth?"width: "+t.itemWidth+"px;":""),attrs:{size:t.size?t.size:e.size,disabled:t.disabled,placeholder:t.placeholder},model:{value:e.params[t.modelValue],callback:function(a){e.$set(e.params,t.modelValue,a)},expression:"params[form.modelValue]"}},[e._l(t.options,(function(e,n){return a("el-option",{key:n+"_local",attrs:{value:"object"===typeof e?e[t.valueKey||"value"]:e,label:"object"===typeof e?e[t.labelKey||"label"]:e}})})),e._v(" "),e._l(e.selectOptions[e.selectOptionPrefix+n],(function(e,n){return a("el-option",{key:n+"_remote",attrs:{value:"object"===typeof e?e[t.valueKey||"value"]:e,label:"object"===typeof e?e[t.labelKey||"label"]:e}})}))],2):"date"===t.itemType?a("el-date-picker",{style:e.itemStyle+(t.itemWidth?"width: "+t.itemWidth+"px;":""),attrs:{type:"date",placeholder:t.placeholder,size:t.size?t.size:e.size,disabled:t.disabled,readonly:t.readonly,editable:t.editable,"picker-options":t.pickerOptions||{}},model:{value:e.params[t.modelValue],callback:function(a){e.$set(e.params,t.modelValue,a)},expression:"params[form.modelValue]"}}):"daterange"===t.itemType?a("el-date-picker",{style:e.itemStyle+(t.itemWidth?"width: "+t.itemWidth+"px;":""),attrs:{size:t.size?t.size:e.size,type:"daterange",disabled:t.disabled,readonly:t.readonly,editable:t.editable,placeholder:t.placeholder,"picker-options":t.pickerOptions||{}},on:{change:function(a){return e.changeDate(a,t.prop[0],t.prop[1])}},model:{value:e.params[t.modelValue],callback:function(a){e.$set(e.params,t.modelValue,a)},expression:"params[form.modelValue]"}}):e._e()],1)})),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary",size:e.size,loading:e.submitLoading},on:{click:e.searchHandler}},[e._v("\n      "+e._s(e.submitBtnText)+"\n    ")]),e._v(" "),e.showResetBtn?a("el-button",{attrs:{type:"primary",plain:!0,size:e.size,loading:e.submitLoading},on:{click:e.resetForm}},[e._v("\n      "+e._s(e.resetBtnText)+"\n    ")]):e._e()],1)],2)},d=[],p={size:{type:String,default:"",validator:f},showResetBtn:{type:Boolean,default:!0},inline:{type:Boolean,default:!0},fuzzy:{type:Boolean,default:!1},labelWidth:Number,itemWidth:Number,submitHandler:Function,submitLoading:{type:Boolean,default:!1},submitBtnText:{type:String,default:"查询"},resetBtnText:{type:String,default:"重置"},resetBtnCallback:Function,forms:{type:Array,required:!0}};function f(e){var t=["large","small","mini"],a=-1!==t.indexOf(e.toLowerCase())||""===e;if(!a)throw new Error("Size must be one of ['large', 'small', 'mini']");return a}function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(e){return b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}var g={name:"ElSearchForm",props:p,data:function(){var e=this,t=this.$props,a=t.forms,n=t.fuzzy,r="daterange-prefix",i="select-option-prefix",o={selectOptions:{}},l={},s={},c={};return a.forEach((function(t,a){var u=b(t.prop);if("string"===u?(t.modelValue=t.prop,l[t.prop]="",c[t.prop]=t.fuzzy?t.fuzzy:n,t.format&&(s[t.prop]=t.format)):"object"===u&&"[object Array]"===Object.prototype.toString.call(t.prop)&&t.prop.forEach((function(e){l[e]="",t.format&&(s[e]=t.format),c[e]=t.fuzzy?t.fuzzy:n})),"daterange"===t.itemType&&(l[r+a]="",t.modelValue=r+a),"select"===t.itemType&&(t.selectFetch||t.selectUrl)){var d=i+a;o.selectOptions[d]=[];var p=e.$axios;t.selectMethod||(t.selectMethod="get"),e.getRemoteData({fetch:t.selectFetch?t.selectFetch:function(){return p[t.selectMethod](t.selectUrl,"get"===t.selectMethod.toLowerCase()?{params:t.selectParams}:t.selectParams)},dataKey:d,resultField:t.selectResultField||"result",resultHandler:t.selectResultHandler})}})),h({params:l,datePrefix:r,selectOptionPrefix:i},o,{format:s,fuzzyOps:c})},computed:{itemStyle:function(){var e=this.itemWidth;return e?"width: ".concat(e,"px;"):""}},methods:{isArray:function(e){return"object"===b(e)&&"[object Array]"===Object.prototype.toString.call(e)},searchHandler:function(){var e=this;this.getParams((function(t,a){if(!t){var n=e.submitHandler;if(!n)throw new Error("Need to set attribute: submitHandler !");n(a)}}))},getParamFuzzy:function(){return this.fuzzyOps},getParams:function(e){var t=this;this.$refs["form"].validate((function(a){if(a){var n=t.params,r=t.datePrefix,i=t.format,o={};Object.keys(n).forEach((function(e){-1===e.indexOf(r)&&(o[e]=i[e]?i[e](n[e],e):n[e])})),e&&e(null,o)}else e&&e(new Error)}))},resetForm:function(){this.$refs["form"].resetFields();var e=this.resetBtnCallback;e&&e()},changeDate:function(e,t,a){var n;if(null===e)return this.params[t]="",void(this.params[a]="");if("string"===typeof e)n=e.split(" - ");else if(e&&e.hasOwnProperty("length")){var r=e[0],i=e[1];n=["".concat(r.getFullYear(),"-").concat(("0"+(r.getMonth()+1)).substr(-2),"-").concat(("0"+r.getDate()).substr(-2)),"".concat(i.getFullYear(),"-").concat(("0"+(i.getMonth()+1)).substr(-2),"-").concat(("0"+i.getDate()).substr(-2))]}this.params[t]=n[0],this.params[a]=n[1]},getRemoteData:function(e){var t=this,a=e.fetch,n=e.dataKey,r=e.resultField,i=e.resultHandler;a().then((function(e){var a=e;"object"!==b(e)||t.isArray(e)||(-1!==r.indexOf(".")?r.split(".").forEach((function(e){a=a[e]})):a=e[r]),a&&a instanceof Array||console.warn("The result of key:".concat(r," is not Array. 接口返回的字段:").concat(r," 不是一个数组")),t.selectOptions[n]=i?a.map(i):a}))}}},v=g,w=a("2877"),S=Object(w["a"])(v,u,d,!1,null,null,null),x=S.exports;function O(e){return k(e)||H(e)||z()}function z(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function H(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function k(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function j(e){return j="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var _={name:"SearchTablePagination",components:{SearchForm:x},props:c,data:function(){var e=this;return{pagination:{pageIndex:1,pageSize:function(){var t=e.pageSizes;return t.length>0?t[0]:20}()},total:0,loading:!1,tableData:[],cacheLocalData:[]}},computed:{newSlotScope:function(){return Number(l["default"].version.replace(/\./g,""))>=250}},watch:{data:function(e){this.loadLocalData(e)}},mounted:function(){var e=this;this.$refs["table"].$on("expand",(function(t,a){return e.emitEventHandler("expand",t,a)}));var t=this.type,a=this.autoLoad,n=this.data,r=this.formOptions,i=this.params;"remote"===t&&a?r?this.$refs["searchForm"].getParams((function(t,a){t||e.fetchHandler(Object.assign(a,i))})):this.fetchHandler(i):"local"===t&&this.loadLocalData(n)},methods:{handleSizeChange:function(e){this.pagination.pageSize=e,this.dataChangeHandler()},handleCurrentChange:function(e){this.pagination.pageIndex=e,this.dataChangeHandler()},searchHandler:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&(this.pagination.pageIndex=1),this.dataChangeHandler(arguments[0])},dataChangeHandler:function(){var e=this.type;"local"===e?this.dataFilterHandler(arguments[0]):"remote"===e&&this.fetchHandler(arguments[0])},dataFilter:function(e){var t=this.pagination,a=t.pageIndex,n=t.pageSize;return e.filter((function(e,t){return t>=(a-1)*n&&t<a*n}))},dataFilterHandler:function(e){var t,a=this.cacheLocalData,n=this.params,r=Object.assign(n,e),i=Object.keys(r).filter((function(e){return void 0!==r[e]&&""!==r[e]})),o=this.$refs["searchForm"];if(o&&(t=o.getParamFuzzy()),i.length>0){var l=a.filter((function(e){var a=[];return i.forEach((function(n){"number"===typeof e[n]?a.push(t&&t[n]?-1!==String(e[n]).indexOf(String(r[n])):String(e[n])===String(r[n])):a.push(t&&t[n]?-1!==e[n].indexOf(r[n]):e[n]===r[n])})),a.every((function(e){return e}))}));this.tableData=this.dataFilter(l),this.total=l.length}else this.total=a.length,this.tableData=this.dataFilter(a)},fetchHandler:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0;var a,n=this.fetch,r=this.method,i=this.url,o=this.$axios,l=this.headers,s=this.listField,c=this.pageIndexKey,u=this.pageSizeKey,d=this.totalField,p=this.params,f=this.showPagination,m=this.pagination;(p=JSON.parse(JSON.stringify(Object.assign(p,t))),f)&&(p=Object.assign(p,(a={},E(a,c,m.pageIndex),E(a,u,m.pageSize),a)));var h=null;n?h=n(p):(o.interceptors.request.use((function(e){return Object.keys(l).forEach((function(t){e.headers[t]=l[t]})),e}),(function(e){return Promise.reject(e)})),r=r.toLowerCase(),h="get"===r?o[r](i,{params:p}):o[r](i,p)),h.then((function(t){var a=t;if(!t||t instanceof Array||(s&&-1!==s.indexOf(".")?s.split(".").forEach((function(e){a=a[e]})):a=t[s]),!a||!(a instanceof Array))throw e.loading=!1,new Error("The result of key:".concat(s," is not Array."));e.dataHandler?e.tableData=a.map(e.dataHandler):e.tableData=a;var n=t;"[object Array]"===Object.prototype.toString.call(t)?n=t.length:"object"===j(t)?d&&-1!==d.indexOf(".")?d.split(".").forEach((function(e){n=n[e]})):n=t[d]:n=0,e.total=n,e.loading=!1})).catch((function(){e.loading=!1}))},emitEventHandler:function(e){this.$emit.apply(this,[e].concat(O(Array.from(arguments).slice(1))))},loadLocalData:function(e){var t=this.autoLoad;if(!e)throw this.showPagination=!1,new Error("When the type is 'local', you must set attribute 'data' and 'data' must be a array.");var a=JSON.parse(JSON.stringify(e));this.cacheLocalData=a,t&&(this.tableData=this.dataFilter(a),this.total=a.length)}}},F=_,P=(a("f155"),Object(w["a"])(F,i,o,!1,null,"6fe7c93c",null)),$=P.exports,B={components:{SearchTablePagination:$},computed:{formOptions:function(){return{forms:[{itemType:"input",prop:"name",modelValue:"name",label:this.$t("table.column.name")}]}},columns:function(){return[{type:"index"},{prop:"name",label:this.$t("table.column.name")},{prop:"age",label:this.$t("table.column.age")},{prop:"gender",label:this.$t("table.column.name")},{prop:"address",label:this.$t("table.column.address"),width:"auto"},{prop:"birthday",label:this.$t("table.column.birthday")},{prop:"action",label:this.$t("table.column.action")}]}},created:function(){this.$client.getUserList({})}},C=B,T=Object(w["a"])(C,n,r,!1,null,null,null);t["default"]=T.exports},f155:function(e,t,a){"use strict";var n=a("5ec8"),r=a.n(n);r.a}}]);